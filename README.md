# AntVis MCP SSE - ä¸“ä¸šå›¾è¡¨æ¸²æŸ“æœåŠ¡å™¨

è¿™æ˜¯ä¸€ä¸ªåŸºäº Model Context Protocol (MCP) çš„**ä¸“ä¸šå›¾è¡¨æ¸²æŸ“æœåŠ¡å™¨**ï¼Œæ”¯æŒ 8 ç§å›¾è¡¨ç±»å‹ï¼Œå…·å¤‡å¤–éƒ¨è®¿é—®èƒ½åŠ›ã€æ€§èƒ½ä¼˜åŒ–å’ŒDockerå®¹å™¨åŒ–éƒ¨ç½²ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

- ğŸ¯ **8ç§ä¸“ç”¨å›¾è¡¨å·¥å…·** - çº¿å›¾ã€æŸ±å›¾ã€æ¡å›¾ã€é¥¼å›¾ã€é¢ç§¯å›¾ã€æ•£ç‚¹å›¾ã€åŒè½´å›¾ã€ç›´æ–¹å›¾
- ğŸŒ **å¤–éƒ¨è®¿é—®æ”¯æŒ** - å¯é…ç½®ä¸»æœºå/IPï¼Œæ”¯æŒè·¨æœºå™¨è®¿é—®
- âš¡ **æ€§èƒ½ä¼˜åŒ–** - å›¾è¡¨ç¼“å­˜ã€å¼‚æ­¥æ¸²æŸ“ã€æ—¶é—´ç›‘æ§
- ğŸ³ **ä¸€é”®éƒ¨ç½²** - ç®€åŒ–çš„Docker Composeéƒ¨ç½²ï¼Œæ‰€æœ‰é…ç½®é›†ä¸­ç®¡ç†
- ğŸ“Š **HTTP URLè®¿é—®** - ç”Ÿæˆå¯ç›´æ¥è®¿é—®çš„å›¾ç‰‡URL
- ğŸ”’ **ä¼ä¸šçº§å®‰å…¨** - érootç”¨æˆ·è¿è¡Œï¼Œå®‰å…¨æ²™ç®±
- ğŸ“ˆ **å®æ—¶ç›‘æ§** - SSEè¿æ¥çŠ¶æ€ã€æ€§èƒ½æŒ‡æ ‡ã€å¥åº·æ£€æŸ¥

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®éƒ¨ç½²ï¼ˆæ¨èï¼‰

```bash
# 1. å…‹éš†é¡¹ç›®
git clone <repository-url>
cd antvis-mcp-sse

# 2. ä¿®æ”¹å¤–éƒ¨è®¿é—®IPï¼ˆç¼–è¾‘docker-compose.ymlä¸­çš„HOSTå€¼ï¼‰
# å°† HOST=192.168.10.187 æ”¹ä¸ºæ‚¨çš„å®é™…IPåœ°å€

# 3. æ„å»ºå¹¶å¯åŠ¨æœåŠ¡
docker build -t antvis-chart-sse:latest .
docker compose up -d

# 4. éªŒè¯æœåŠ¡
curl http://YOUR_IP:7001/health
```

### æœ¬åœ°å¼€å‘

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. è®¾ç½®ç¯å¢ƒå˜é‡å¹¶å¯åŠ¨
export HOST=YOUR_IP  # æ›¿æ¢ä¸ºæ‚¨çš„å®é™…IP
export PORT=7001
npm start
```

## ğŸ“Š MCP å·¥å…·åˆ—è¡¨

| å·¥å…·åç§° | å›¾è¡¨ç±»å‹ | é€‚ç”¨åœºæ™¯ |
|---------|---------|---------| 
| `render_line_chart` | çº¿å›¾ | è¶‹åŠ¿åˆ†æã€æ—¶é—´åºåˆ—æ•°æ® |
| `render_column_chart` | æŸ±å›¾ | åˆ†ç±»æ•°æ®æ¯”è¾ƒã€æ’ååˆ†æ |
| `render_bar_chart` | æ¡å›¾ | æ°´å¹³å¯¹æ¯”ã€é•¿æ ‡ç­¾æ•°æ® |
| `render_pie_chart` | é¥¼å›¾ | å æ¯”åˆ†æã€æ„æˆåˆ†æ |
| `render_area_chart` | é¢ç§¯å›¾ | ç´¯ç§¯æ•°æ®ã€è¶‹åŠ¿å¡«å…… |
| `render_scatter_chart` | æ•£ç‚¹å›¾ | ç›¸å…³æ€§åˆ†æã€åˆ†å¸ƒç ”ç©¶ |
| `render_dual_axes_chart` | åŒè½´å›¾ | ä¸åŒé‡çº§æ•°æ®å¯¹æ¯” |
| `render_histogram_chart` | ç›´æ–¹å›¾ | æ•°æ®åˆ†å¸ƒã€é¢‘ç‡åˆ†æ |

æ¯ä¸ªå·¥å…·éƒ½æ”¯æŒï¼š
- âœ… å®Œæ•´çš„æ•°æ®éªŒè¯å’Œé”™è¯¯å¤„ç†
- âœ… ä¸°å¯Œçš„æ ·å¼å®šåˆ¶é€‰é¡¹
- âœ… ç¼“å­˜æœºåˆ¶æå‡æ€§èƒ½
- âœ… è¿”å›å¯å¤–éƒ¨è®¿é—®çš„HTTP URL

## âš™ï¸ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

æ‰€æœ‰é…ç½®éƒ½åœ¨ `docker-compose.yml` ä¸­é›†ä¸­ç®¡ç†ï¼š

```yaml
environment:
  - PORT=7001                    # æœåŠ¡ç«¯å£
  - ENDPOINT=/message            # SSEç«¯ç‚¹è·¯å¾„
  - NODE_ENV=production          # è¿è¡Œç¯å¢ƒ
  - HOST=192.168.10.187         # å¤–éƒ¨è®¿é—®ä¸»æœºï¼ˆä¿®æ”¹ä¸ºæ‚¨çš„IPï¼‰
  - LOG_LEVEL=info              # æ—¥å¿—çº§åˆ«
  - IMAGES_DIR=/app/images      # å›¾ç‰‡å­˜å‚¨ç›®å½•
  - MAX_IMAGE_SIZE=10           # æœ€å¤§å›¾ç‰‡å¤§å°é™åˆ¶(MB)
```

### ä¿®æ”¹å¤–éƒ¨è®¿é—®åœ°å€

ç¼–è¾‘ `docker-compose.yml` æ–‡ä»¶ï¼Œä¿®æ”¹ `HOST` ç¯å¢ƒå˜é‡ï¼š

```yaml
# æœ¬æœºè®¿é—®
- HOST=localhost

# å±€åŸŸç½‘è®¿é—®
- HOST=192.168.1.100

# å…¬ç½‘è®¿é—®ï¼ˆå¦‚æœæœ‰å…¬ç½‘IPæˆ–åŸŸåï¼‰
- HOST=your-domain.com
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
antvis-mcp-sse/
â”œâ”€â”€ server.js              # ä¸»æœåŠ¡å™¨ä»£ç 
â”œâ”€â”€ Dockerfile             # Dockeræ„å»ºé…ç½®
â”œâ”€â”€ docker-compose.yml     # å®¹å™¨ç¼–æ’é…ç½®
â”œâ”€â”€ package.json           # é¡¹ç›®ä¾èµ–
â”œâ”€â”€ README.md              # é¡¹ç›®æ–‡æ¡£
â”œâ”€â”€ .dockerignore          # Dockeræ„å»ºå¿½ç•¥
â”œâ”€â”€ .gitignore             # Gitå¿½ç•¥é…ç½®
â””â”€â”€ images/                # å›¾ç‰‡å­˜å‚¨ç›®å½•
```

## ğŸ”§ å·¥å…·ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€é¥¼å›¾

```json
{
  "name": "render_pie_chart",
  "arguments": {
    "title": "é”€å”®å æ¯”åˆ†æ",
    "data": [
      {"category": "äº§å“A", "value": 30},
      {"category": "äº§å“B", "value": 25},
      {"category": "äº§å“C", "value": 45}
    ],
    "config": {
      "angleField": "value",
      "colorField": "category"
    }
  }
}
```

**è¿”å›ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "filename": "pie_chart_1234567890.png",
  "path": "/app/images/pie_chart_1234567890.png",
  "url": "http://192.168.10.187:7001/images/pie_chart_1234567890.png",
  "timestamp": "2024-12-25T10:30:00.000Z"
}
```

### é«˜çº§åŒè½´å›¾

```json
{
  "name": "render_dual_axes_chart",
  "arguments": {
    "title": "é”€å”®é¢ä¸åˆ©æ¶¦ç‡å¯¹æ¯”",
    "data": [
      {"month": "1æœˆ", "sales": 1000, "profit_rate": 15},
      {"month": "2æœˆ", "sales": 1200, "profit_rate": 18}
    ],
    "config": {
      "xField": "month",
      "yField": ["sales", "profit_rate"],
      "geometryOptions": [
        {"geometry": "column", "color": "#5B8FF9"},
        {"geometry": "line", "color": "#5AD8A6"}
      ]
    }
  }
}
```

## ğŸ“ˆ æ€§èƒ½ç‰¹æ€§

### æ™ºèƒ½ç¼“å­˜ç³»ç»Ÿ
- åŸºäºé…ç½®å“ˆå¸Œçš„å›¾è¡¨ç¼“å­˜
- æœ€å¤§ç¼“å­˜100ä¸ªå›¾è¡¨ï¼Œè‡ªåŠ¨æ¸…ç†
- ç¼“å­˜å‘½ä¸­å¯å‡å°‘90%çš„æ¸²æŸ“æ—¶é—´

### å¼‚æ­¥æ¸²æŸ“å¼•æ“
- éé˜»å¡å›¾è¡¨ç”Ÿæˆ
- å¹¶å‘å¤„ç†å¤šä¸ªæ¸²æŸ“è¯·æ±‚
- å®æ—¶æ€§èƒ½ç›‘æ§å’Œæ—¥å¿—

### ç›‘æ§æŒ‡æ ‡
- æ¸²æŸ“æ—¶é—´ç»Ÿè®¡
- ç¼“å­˜å‘½ä¸­ç‡
- SSEè¿æ¥çŠ¶æ€
- ç³»ç»Ÿèµ„æºä½¿ç”¨

## ğŸ³ Docker éƒ¨ç½²

### æ„å»ºé•œåƒ

```bash
# æ ‡å‡†æ„å»º
docker build -t antvis-chart-sse:latest .

# æ— ç¼“å­˜æ„å»º
docker build --no-cache -t antvis-chart-sse:latest .
```

### å®¹å™¨ç®¡ç†

```bash
# å¯åŠ¨æœåŠ¡
docker compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker compose logs -f antvis-mcp

# åœæ­¢æœåŠ¡
docker compose down

# é‡å¯æœåŠ¡
docker compose restart
```

### å¥åº·æ£€æŸ¥

å®¹å™¨è‡ªå¸¦å¥åº·æ£€æŸ¥ï¼Œè®¿é—® `/health` ç«¯ç‚¹ï¼š

```bash
curl http://YOUR_IP:7001/health
# è¿”å›: {"status":"ok","timestamp":"2024-12-25T10:30:00.000Z"}
```

## ğŸ› ï¸ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**1. å›¾ç‰‡URLæ— æ³•è®¿é—®**
```bash
# æ£€æŸ¥HOSTç¯å¢ƒå˜é‡è®¾ç½®
docker compose exec antvis-mcp env | grep HOST

# ç¡®è®¤é˜²ç«å¢™ç«¯å£å¼€æ”¾
sudo ufw allow 7001
```

**2. å®¹å™¨å¯åŠ¨å¤±è´¥**
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker compose logs antvis-mcp

# æ£€æŸ¥ç«¯å£å ç”¨
netstat -tulpn | grep 7001
```

**3. å›¾è¡¨æ¸²æŸ“ç¼“æ…¢**
```bash
# æŸ¥çœ‹ç¼“å­˜å‘½ä¸­ç‡
docker compose logs antvis-mcp | grep "ç¼“å­˜"

# ç›‘æ§å®¹å™¨èµ„æº
docker stats antvis-mcp
```

**4. SSEè¿æ¥é¢‘ç¹æ–­å¼€**
```bash
# è¿™æ˜¯æ­£å¸¸ç°è±¡ï¼ŒIDEä¼šè‡ªåŠ¨é‡è¿
# å¯é€šè¿‡æ—¥å¿—çº§åˆ«æ§åˆ¶è¯¦ç»†ç¨‹åº¦
# åœ¨docker-compose.ymlä¸­è®¾ç½®: LOG_LEVEL=warn
```

### æ€§èƒ½ä¼˜åŒ–å»ºè®®

**ç”Ÿäº§ç¯å¢ƒ**
- ä½¿ç”¨SSDå­˜å‚¨æå‡å›¾ç‰‡å†™å…¥é€Ÿåº¦
- é…ç½®Nginxåå‘ä»£ç†è¿›è¡Œè´Ÿè½½å‡è¡¡
- è®¾ç½®é€‚å½“çš„å®¹å™¨èµ„æºé™åˆ¶
- å®šæœŸæ¸…ç†å†å²å›¾ç‰‡æ–‡ä»¶

**å¼€å‘ç¯å¢ƒ**
- ä½¿ç”¨æœ¬åœ°volumeæŒ‚è½½åŠ é€Ÿå¼€å‘
- å¯ç”¨è¯¦ç»†æ—¥å¿—ä¾¿äºè°ƒè¯•
- é…ç½®çƒ­é‡è½½ä¾¿äºä»£ç ä¿®æ”¹

## ğŸ“š API æ–‡æ¡£

### MCP æ ‡å‡†æ¥å£

æœ¬æœåŠ¡å®Œå…¨å…¼å®¹ MCP (Model Context Protocol) æ ‡å‡†ï¼š

- **å·¥å…·å‘ç°**: è‡ªåŠ¨æ³¨å†Œ8ä¸ªå›¾è¡¨æ¸²æŸ“å·¥å…·
- **å‚æ•°éªŒè¯**: ä¸¥æ ¼çš„JSON SchemaéªŒè¯
- **é”™è¯¯å¤„ç†**: æ ‡å‡†åŒ–é”™è¯¯å“åº”æ ¼å¼
- **SSEé€šä¿¡**: å®æ—¶åŒå‘é€šä¿¡æ”¯æŒ

### æ•°æ®æ ¼å¼æ”¯æŒ

**è¾“å…¥æ•°æ®æ ¼å¼**
- JSONæ•°ç»„æ ¼å¼
- Chart.jså…¼å®¹æ ¼å¼
- è‡ªåŠ¨æ•°æ®ç±»å‹è½¬æ¢

**è¾“å‡ºæ ¼å¼**
- PNGå›¾ç‰‡æ–‡ä»¶
- å¯é…ç½®å›¾ç‰‡è´¨é‡
- HTTPå¯è®¿é—®URL

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ†˜ æ”¯æŒ

å¦‚æœæ‚¨é‡åˆ°é—®é¢˜æˆ–æœ‰å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [FAQ](#æ•…éšœæ’é™¤) éƒ¨åˆ†
2. æ£€æŸ¥ [GitHub Issues](../../issues)
3. åˆ›å»ºæ–°çš„ Issue æè¿°é—®é¢˜

---

**å¿«é€Ÿå¼€å§‹å‘½ä»¤æ€»ç»“ï¼š**

```bash
# å®Œæ•´éƒ¨ç½²æµç¨‹
git clone <repository-url> && cd antvis-mcp-sse
# ç¼–è¾‘ docker-compose.yml ä¸­çš„ HOST ä¸ºæ‚¨çš„å®é™…IPåœ°å€
docker build -t antvis-chart-sse:latest .
docker compose up -d
# éªŒè¯æœåŠ¡çŠ¶æ€
curl http://YOUR_IP:7001/health
docker compose ps antvis-mcp
```

ğŸ‰ ç°åœ¨æ‚¨å¯ä»¥é€šè¿‡MCPå®¢æˆ·ç«¯ä½¿ç”¨8ä¸ªå¼ºå¤§çš„å›¾è¡¨æ¸²æŸ“å·¥å…·äº†ï¼ 